<style>
  #shopify-section-{{section.id}} {
    padding: {{section.settings.pt}}px 0 {{section.settings.pb}}px;
  }
  .custom-multiple-media .media-wrapper{
    position: relative;
  }
  .custom-multiple-media video{
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  .custom-multiple-media .play-btn{
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    cursor: pointer;
  }
  .custom-multiple-media .content-wrapper{
    margin: 60px auto 0;
    padding: 0 20px;
    max-width: 1200px;
  }
  .custom-multiple-media .content-wrapper .text{
    color: #25282A;
    font-size: 14px;
    font-weight: 300;
    line-height: 19.6px;
    letter-spacing: 0.7px;
  }
  .type-1{

  }
  .type-2 .custom-wrapper{
    display: flex;
    gap: 80px;
    justify-content: space-between;
  }
  .type-2 .media-wrapper{
    flex: 1;
  }
  .type-2 .content-wrapper{
    flex: 1;
    margin: 60px auto 0;
    padding: 0;
    max-width: 100%;
    display: flex;
    flex-direction: column-reverse;

  }
  @media screen and (max-width: 999px) {
    #shopify-section-{{section.id}} {
      padding: {{section.settings.pt_m}}px 0 {{section.settings.pb_m}}px;
    }
    .custom-multiple-media .content-wrapper{
      margin: 30px auto 0;
    }
  }
  @media screen and (max-width: 699px) {
  }
</style>

{% liquid 
  assign custom_class = ''
  assign section_type = section.settings.section_type
  if section_type == 'one-media-top-one-content-bottom'
    assign custom_class = 'type-1'
  elsif section_type == 'one-media-left-one-content-right'
    assign custom_class = 'type-2'
  endif section_type == 'one-media-top-one-content-top'

  assign is_full = section.settings.is_full
%}

<div class="{% unless is_full %}container container--xl{% endunless %} {{custom_class}}">
  <div class="custom-wrapper">
    {% for block in section.blocks %}
      {% assign bs = block.settings %}
      {% if block.type == 'media' %}
        <div class="media-wrapper">
          {% if bs.use_video %}
            {% if bs.autoplay %}
              {{ bs.video | video_tag: autoplay: true, loop: true, muted: true, controls: false, playsinline: true, image_size: 'master', class:'sm-max:hidden' }}
              {% if bs.mobile_video != blank %}
                {{ bs.mobile_video | video_tag: autoplay: true, loop: true, muted: true, controls: false, playsinline: true, image_size: 'master', class:' sm:hidden' }}
              {% endif %}
            {% else %}
              {{ bs.video | video_tag: autoplay: false, loop: true, muted: true, controls: false, playsinline: true, image_size: 'master', class:'sm-max:hidden' }}
              {% if bs.mobile_video != blank %}
                {{ bs.mobile_video | video_tag: autoplay: false, loop: true, muted: true, controls: false, playsinline: true, image_size: 'master', class:' sm:hidden' }}
              {% endif %}
              <div class="play-btn">
                {% render 'play-video' %} 
              </div>
            {% endif %}
          {% else %}
            {% if bs.img != blank %}
              <picture>
                {%- if bs.img_m != blank -%}
                  <source
                    media="(max-width: 699px)"
                    srcset="{{ bs.img_m | image_url: width: '400x' }} 400w, {{ bs.img_m | image_url: width: '600x' }} 600w, {{ bs.img_m | image_url: width: '800x' }} 800w, {{ bs.img_m | image_url: width: '1000x' }} 1000w, {{ bs.img_m | image_url: width: '1200x' }} 1200w"
                    width="{{ bs.img_m.width }}"
                    height="{{ bs.img_m.height }}">
                {%- endif -%}
                {{- bs.img | image_url: width: bs.img.width | image_tag: sizes: '100vw', widths: '300,400,500,600,800,1000,1200,1400,1600,1800,2000,2200,2400,2600,2800,3000' -}}
              </picture>
            {% endif %}
          {% endif %}
        </div>
      {% endif %}
    {% endfor %}
    {% for block in section.blocks %}  
      {% if block.type == 'text' %}
        <div class="content-wrapper">
            {% assign bs = block.settings %}
            <div class="text-item">
              {% if bs.title != blank %}
                <h2 class="title">{{ bs.title }}</h2>
              {% endif %}
              {% if bs.text != blank %}
                <p class="text">{{ bs.text }}</p>
              {% endif %}
            </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    $('.custom-multiple-media .play-btn').click(function () {
      $(this).hide();
      $(this).parent().find('video')[0].play();
      $(this).parent().find('video')[1].play();
    })
  });
</script>

{% schema %}
  {
    "name": "custom multiple media",
    "class": "custom-multiple-media",
    "tag": "section",
    "disabled_on": {
      "groups": ["footer", "header"]
    },
    "settings": [
      {
        "type": "checkbox",
        "id": "is_full",
        "label": "Full width",
        "default": true
      },
      {
        "type": "select",
        "id": "section_type",
        "label": "Section type",
        "options": [
          {
            "value": "one-media-top-one-content-bottom",
            "label": "One media top,one content bottom"
          },
          {
            "value": "one-media-left-one-content-right",
            "label": "One media left,one content right"
          }
        ],
        "default": "one-media-top-one-content-bottom"
      },
      {
        "type": "select",
        "id": "text_alignment",
        "label": "Text alignment",
        "info": "This setting only works when section type is 'One media left,one content right'",
        "options": [
          {
            "value": "left",
            "label": "Left"
          },
          {
            "value": "right",
            "label": "Right"
          }
        ],
        "default": "right"
      },
      {
        "type": "range",
        "id": "pt",
        "min": 0,
        "max": 160,
        "step": 2,
        "label": "Padding top",
        "default": 120,
        "unit": "px"
      },
      {
        "type": "range",
        "id": "pb",
        "min": 0,
        "max": 160,
        "step": 2,
        "label": "Padding bottom",
        "default": 120,
        "unit": "px"
      },
      {
        "type": "range",
        "id": "pt_m",
        "min": 0,
        "max": 100,
        "step": 1,
        "label": "Padding top Mobile",
        "default": 60,
        "unit": "px"
      },
      {
        "type": "range",
        "id": "pb_m",
        "min": 0,
        "max": 100,
        "step": 1,
        "label": "Padding bottom Mobile",
        "default": 60,
        "unit": "px"
      }
    ],
    "blocks": [
      {
        "type": "media",
        "name": "media",
        "limit": 2,
        "settings": [
          {
            "type": "image_picker",
            "id": "img",
            "label": "Image PC"
          },
          {
            "type": "image_picker",
            "id": "img_m",
            "label": "Image Mobile"
          },
          {
            "type": "checkbox",
            "id": "use_video",
            "label": "Use video",
            "default": true,
            "info": "Image will be the post image if video is used"
          },
          {
            "type": "checkbox",
            "id": "autoplay",
            "label": "Autoplay",
            "default": true
          },
          {
            "type": "video",
            "id": "video",
            "label": "Video PC"
          },
          {
            "type": "video",
            "id": "mobile_video",
            "label": "Video Mobile"
          }
        ]
      },
      {
        "type": "text",
        "name": "text",
        "limit": 2,
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Title",
            "default": "Product Introduction"
          },
          {
            "type": "textarea",
            "id": "text",
            "label": "Text",
            "default": "Lorem ipsum dolor sit amet, mei et tempor voluptaria. Usu ut utinam menandri, ei nulla timeam intellegat nec. Sed animal discere praesent eu, vim probo deserunt no. Et invidunt antiopam sit, copiosae principes prodesset sed ei. Maiorum corpora expetenda ex quo, nam te malorum phaedrum."
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "custom multiple media"
      }
    ]
  }
{% endschema %}