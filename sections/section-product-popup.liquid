{% assign sid = section.id %}

<style>
  #shopify-section-{{sid}} .e_product_item{
    max-width:500px;
  }
  #shopify-section-{{sid}} .e_product_item .e_meida{
    position:relative;
  }
  #shopify-section-{{sid}} .e_product_item .e_meida img{
    width:100%;
    height:100%;
    object-fit:cover;
    display:block;
  }
  #shopify-section-{{sid}} .e_product_item .e_info{
    padding: 12px;
    text-align: left;
  }
  #shopify-section-{{sid}} .e_product_item .e_info h3{
    color: #25282A;
    font-weight: 500;
    font-size:14px; 
    line-height: 1.4;
  }
  #shopify-section-{{sid}} .e_product_item .e_info .short{
    margin-top:4px; 
    color: #25282A;
    font-size: 12px;
    font-weight: 300;
    line-height: 1.4;
    letter-spacing: 0.6px;
  }
  #shopify-section-{{sid}} .e_product_item .e_info .price-list>*{
    margin-top:4px; 
    color: #25282A;
    font-size: 12px;
    font-weight: 300;
    line-height: 1.4;
    letter-spacing: 0.6px;
  }
  @media (max-width:1024px){
    #shopify-section-{{sid}} .e_product_item .e_info h3{
    }
    #shopify-section-{{sid}} .e_product_item .e_info .price{
    }
  }
  @media (max-width:767px){
    #shopify-section-{{sid}} {
      margin:60px 0;
    }
    #shopify-section-{{sid}} .index-products_swiper{
      padding:0 max(var(--container-gutter),50% - var(--container-max-width) / 2);
    }
    #shopify-section-{{sid}} .e_product_item .e_info h3{
    }
    #shopify-section-{{sid}} .e_product_item .e_info .price{
    }
  }
</style>

<div class="index-products">
  <div class="setion-title">
    <h3>{{section.settings.title}}</h3>
    <div class="product_ctrl">
        <div class="prev_button"></div>
        <div class="next_button"></div>
    </div>
  </div>
  <div class="swiper index-products_swiper">
    <div class="swiper-wrapper">

      {% for block in section.blocks %} 
        {% liquid
          assign bs = block.settings
          assign product = bs.product
        %}
        <div class="swiper-slide">
          <div class="e_product_item">
            <a href="{{ product.url }}">
              <div class="e_meida">
                  {{ product.images[0] | image_url: width: '500x' | image_tag: class:"first" }}
              </div>
              <div class="e_info">
                <h3>{{ product.title }}</h3>
                {% if product.metafields.custom.short.value != blank %} 
                  <p class="short">{{product.metafields.custom.short.value}}</p>
                {% endif %}
                {%- render 'price-list', product: product, context: 'card' -%}
              </div>
            </a>
          </div>
        </div>
      {% endfor %}

    </div>
  </div>  
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    let index_products_siwper{{section.index}} = new Swiper('#shopify-section-{{ sid }} .index-products_swiper', {
      spaceBetween: 16,
      slidesPerView: 4,
      navigation: {
        prevEl: '#shopify-section-{{ sid }} .prev_button',
        nextEl: '#shopify-section-{{ sid }} .next_button',
      },
      breakpoints: { 
        320: { 
          slidesPerView: 1.4,
          spaceBetween: 8
        },
        768: {   
          slidesPerView: 3,
          spaceBetween: 12
        },
        1280: {  
          slidesPerView: 4,
          spaceBetween: 16
        }
      }
    });
  })
</script>

{% schema %}
  {
    "name": "Index products",
    "settings": [
        {
            "type": "text",
            "id": "title",
            "label": "Title",
            "default":"You May Also Like"
        }
    ],
    "blocks": [
      {
        "type": "product",
        "name":"product",
        "settings":[
          {
            "type": "product",
            "id": "product",
            "label": "product"
          },
          {
              "type": "image_picker",
              "id": "img1",
              "label": "image "
            },
            {
              "type": "image_picker",
              "id": "img2",
              "label": "image （hover）"
            }
        ]
      }
    ],
    "presets":[
      {
    "name": "Index products"
      }
    ]
  }
{% endschema %}