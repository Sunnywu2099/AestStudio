{% liquid
  assign sid = section.id
  assign bs = section.settings
  assign type = bs.type
  assign title = bs.title
  assign btn = bs.btn
  assign link = bs.link
  assign pc_image = bs.img
  assign mobile_image = bs.img_m
  assign alt = bs.img.alt
  assign pc_video = bs.video
  assign mobile_video = bs.video_m
%}
<style>
  @media (min-width:768px){
    #shopify-section-{{ sid }} .media video.mobile{display:none;}
  }
  @media (max-width:767px){
    #shopify-section-{{ sid }} .media video.desktop{display:none;}
} 
</style>
<div class="">
  <div class="item {% if inright %}reverse{% endif %}">
    <div class="media">
      {% if type == 'img' %}
        {% if pc_image != blank %}
          <picture>
            {% if mobile_image != blank %}
            <source
              srcset="{{ mobile_image | img_url: '750x' }}"
              media="(max-width: 375px)"
            >
            <source
              srcset="{{ mobile_image | img_url: '1000x' }}"
              media="(max-width: 767px)"
            >
            {% endif %}
            <source
              srcset="{{ pc_image | img_url: '2160x' }}"
              media="(max-width: 1080px)"
            >
            <img src="{{ pc_image | img_url: '2400x' }}" alt="{{ alt }}" loading="lazy" width="auto" height="100%">
          </picture>
        {% endif %}
      {% else %}
        {% if pc_video != blank %}
          {{ pc_video | video_tag: autoplay: true, loop: true, muted: true, image_size: 'master', class:"desktop" }}
        {% endif %}
        {% if mobile_video != blank %}
          {{ mobile_video | video_tag: autoplay: true, loop: true, muted: true, image_size: 'master', class:"mobile" }}
        {% endif %}
      {% endif %}
    </div>
    <div class="info">
      {% if title != blank %}
        <div class="item_title">{{ title }}</div>
      {% endif %}
      {% if btn != blank %}
        <div class="item_btn" href="{{link}}">{{ btn }} </div>
      {% endif %}
    </div>
  </div>
</div>
{% schema %}
  {
    "name": "Index baaner (full width)",
    "settings":[
      {
          "type":"select",
          "id":"type",
          "label": "选用类型",
          "default":"img",
          "options": [
            {
              "label": "图片",
              "value": "img"
            },
            {
              "label": "视频",
              "value": "video"
            }
          ]
        },
        {
          "type": "header",
          "content": "图片"
        },
        {
          "type": "image_picker",
          "id": "img",
          "label": "Image (desktop)",
        },
        {
          "type": "image_picker",
          "id": "img_m",
          "label": "Image (mobile)",
        },
        {
          "type": "header",
          "content": "视频"
        },
        {
          "type": "video",
          "id": "video",
          "label": "video (desktop)"
        },
        {
          "type": "video",
          "id": "video_m",
          "label": "video (mobile)"
        },
        {
          "type": "textarea",
          "id": "title",
          "label": "Title",
          "default": "Build Your Own Watches"
        },
        {
          "type": "text",
          "id": "btn",
          "label": "Button",
          "default": "Shop Now"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        }
    ],
    "presets":[
      {
    "name": "Index banner (full width)"
      }
    ]
  }
{% endschema %}